<div class="topbar">
  <a href="/" class="logo-container">
    <img class="logo" src="{{ pathLogo }}" alt="Logo de la region" />
    <h1 class="title">{{ title }}</h1>
  </a>
  <input class="search" type="text" [(ngModel)]="searchText" placeholder="Rechercher..." (keyup)="search()" />
  <div class="topbar-actions">
    <button class="user-basket" (click)="goToBasket()">
      <div class="indicator">
        <span
          class="indicator-item indicator-bottom indicator-end badge badge-secondary rounded-full font-semibold py-[2px] px-[6px]">
          {{ basketCount }}
        </span>
        <fa-icon [icon]="faBasketShopping" class="fa-2xl text-primary inline-block" aria-label="panier"></fa-icon>
      </div>
    </button>
    <button class="user-profile btn btn-primary" (click)="onProfileClick()">
      @if (user) { Mon compte } @else { Se connecter }
    </button>
  </div>
</div>
<div class="bottom">
  <!-- Navbar -->
  <nav class="navbar">
    <!-- Dropdown régions -->
    <div class="dropdown">
      <button class="dropbtn">
        Régions {{ selectedRegion ? ': ' + selectedRegion : '' }}
      </button>
      <div class="dropdown-content">
        <button (click)="selectedRegion = ''">Toutes</button>
        <button *ngFor="let r of regions" (click)="selectRegion(r)">
          {{ r.name }}
        </button>
      </div>
    </div>
    <!-- Dropdown catégories -->
    <div class="dropdown" *ngFor="let cat of categories">
      <button class="dropbtn">
        {{cat.name}} {{ selectedCategory ? ': ' + selectedSubCategory : '' }}
      </button>
      <div class="dropdown-content">
        <button (click)="selectCategory(cat)">{{ cat.name }}</button>
        <button *ngFor="let child of cat.childs" (click)="selectSubCategory(child)">
          {{ child.name }}
        </button>
      </div>
    </div>
  </nav>
</div>