<div class="page-container">
    <!-- Sidebar + Produits -->
    <aside class="filters">
        <h3>Filtres</h3>
        <label class="price-filter">
            Prix :
            <div class="inputs">
                <input type="number" [(ngModel)]="minPrice" placeholder="Min" min="0" (change)="loadProducts()" />
                <span> - </span>
                <input type="number" [(ngModel)]="maxPrice" placeholder="Max" min="0" (change)="loadProducts()" />
            </div>
        </label>

        <!-- <fieldset class="availability">
            <legend>Disponibilité</legend>
            <label>
                <input type="checkbox" [(ngModel)]="productAvailable" />
                En stock
            </label>
            <label>
                <input type="checkbox" [(ngModel)]="productUnavailable" />
                Rupture
            </label>
        </fieldset> -->

        <!-- Catégories -->
        <fieldset class="availability">
            <legend>Catégories</legend>
            <label *ngFor="let c of categories">
                <input type="checkbox" [value]="c.name" (change)="toggleCategory(c.name, $event.target.checked)" />
                {{ c.name }}
            </label>
        </fieldset>

        <!-- Régions -->
        <fieldset class="availability">
            <legend>Régions</legend>
            <label *ngFor="let r of regions">
                <input type="checkbox" [value]="r.name" (change)="toggleRegion(r.name, $event.target.checked)" />
                {{ r.name }}
            </label>
        </fieldset>

        <!-- Propriétés -->
        <fieldset class="availability">
            <legend>Propriétés</legend>
            <label *ngFor="let t of tags">
                <input type="checkbox" [value]="t.name" (change)="toggleTag(t.name, $event.target.checked)" />
                {{ t.name }}
            </label>
        </fieldset>
    </aside>

    <main class="product-grid">

        <app-product-card-component *ngFor="let product of products" [id]="product.id" [name]="product.name"
            [image]="product.image ?? '/assets/default.png'" [discount]="product.discount?.percentage_off ?? null"
            [price]="product.price" (addToBasket)="addItem($event)">
        </app-product-card-component>

    </main>
</div>